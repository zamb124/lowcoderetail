{# core_sdk/frontend/templates/fields/list_relation_table.html #}
{# Ожидает: field_ctx #}
{# field_ctx.value здесь - это список UUID #}

{% if field_ctx.value and field_ctx.value is iterable and field_ctx.value is not string %}
    {% set count = field_ctx.value | length %}
    {% if count > 0 %}
        {% set related_model_name = field_ctx.extra.relation_model_name %}
        {# Показываем количество и, возможно, первые несколько с подгрузкой title #}
        <span title="Всего: {{ count }}">
            {{ count }} элемент(-ов)
        </span>
        {# Если хотим показать первые N имен: #}
        {# 
        <ul class="list-unstyled list-inline mb-0">
            {% for item_id_val in field_ctx.value | slice(0, 2) %} {# Показываем первые 2 #}
                <li class="list-inline-item">
                    <span class="badge badge-sm badge-light needs-title-resolution"
                          data-model-name="{{ related_model_name }}"
                          data-item-id="{{ item_id_val }}"
                          title="ID: {{ item_id_val }}">
                        {{- item_id_val | string | truncate(8, True, '...') -}}
                    </span>
                </li>
            {% endfor %}
            {% if count > 2 %}
                <li class="list-inline-item"><span class="badge badge-sm badge-light">…</span></li>
            {% endif %}
        </ul>
        #}
    {% else %}
        <span class="text-muted">-</span>
    {% endif %}
{% else %}
    <span class="text-muted">-</span>
{% endif %}