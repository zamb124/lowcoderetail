{# core_sdk/frontend/templates/fields/text_input.html #}
{# Ожидает: field_ctx #}
{% set input_type = field_ctx.extra.get('input_type', 'text') %}
{% if field_ctx.field_type == 'number' %}{% set input_type = 'number' %}
    {% elif field_ctx.field_type == 'datetime' %}{% set input_type = 'datetime-local' %}
    {% elif field_ctx.field_type == 'date' %}{% set input_type = 'date' %}
    {% elif field_ctx.field_type == 'time' %}{% set input_type = 'time' %}
    {% elif field_ctx.field_type == 'email' %}{% set input_type = 'email' %}
    {% elif field_ctx.field_type == 'url' %}{% set input_type = 'url' %}
{% endif %}

{% set current_value = field_ctx.value %}
{% if input_type == 'datetime-local' and field_ctx.value and hasattr(field_ctx.value, 'strftime') %}
    {% set current_value = field_ctx.value.strftime('%Y-%m-%dT%H:%M') %}
{% elif input_type == 'date' and field_ctx.value and hasattr(field_ctx.value, 'strftime') %}
    {% set current_value = field_ctx.value.strftime('%Y-%m-%d') %}
{% elif input_type == 'time' and field_ctx.value and hasattr(field_ctx.value, 'strftime') %}
    {% set current_value = field_ctx.value.strftime('%H:%M') %}
{% else %}
    {% set current_value = field_ctx.value | default('', true) %}
{% endif %}

<div class="form-floating mb-3">
    <input type="{{ input_type }}"
           class="form-control {% if field_ctx.errors %}is-invalid{% endif %}"
           id="{{ field_ctx.html_id }}"
           name="{{ field_ctx.html_name }}"
           value="{{ current_value }}"
           placeholder="{{ field_ctx.label }}" {# Placeholder обязателен для form-floating #}
           {% if field_ctx.is_readonly %}readonly disabled{% endif %}
           {% if field_ctx.is_required %}required{% endif %}
           aria-describedby="{{ field_ctx.html_id }}_errors">
    <label for="{{ field_ctx.html_id }}">
        {{ field_ctx.label }}{% if field_ctx.is_required %}<span class="text-danger">*</span>{% endif %}

    </label>
    {% if field_ctx.description %}
            <span class="form-floating-info-icon"
                  data-bs-toggle="tooltip"
                  data-bs-placement="top"
                  data-bs-container="{% if ctx and ctx.extra and ctx.extra.modal_container_id %}{{ '#' ~ ctx.extra.modal_container_id }}{% else %}body{% endif %}"
                  title="{{ field_ctx.description | escape }}">
        <i class="ti ti-info-circle text-muted"></i>
    </span>
        {% endif %}

    {% if field_ctx.errors %}
        <div class="invalid-feedback">
            {{ field_ctx.errors | join(', ') }}
        </div>
    {% endif %}

</div>