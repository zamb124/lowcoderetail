{# core_sdk/frontend/templates/components/view.html #}
{# Ожидает: ctx (RenderContext), request, user, SDK_STATIC_URL, url_for #}
{# Этот шаблон НЕ содержит обертки card или кнопок действий. #}
{# Он для включения в .modal-body или другой контейнер. #}

{# Заголовок, если нужен специфичный (обычно заголовок модалки или страницы выше) #}
{# <h3 class="mb-5">{{ ctx.title }}</h3> #}

{% if ctx.errors and ctx.errors._form %} {# Ошибки здесь маловероятны для view, но на всякий случай #}
    <div class="alert alert-danger">
        <span>
            {% if ctx.errors._form is iterable and ctx.errors._form is not string %}
                {{ ctx.errors._form | join('<br>') | safe }}
            {% else %}
                {{ ctx.errors._form | safe }}
            {% endif %}
        </span>
    </div>
{% endif %}

{% for field_ctx_loopvar in ctx.fields %}
    {# Передаем полный контекст, чтобы шаблоны полей имели доступ ко всему, если нужно #}
    {% with field_ctx=field_ctx_loopvar, request=request, user=user, SDK_STATIC_URL=SDK_STATIC_URL, url_for=url_for, ctx=ctx %}
        {% include field_ctx_loopvar.template_path %}
    {% endwith %}
{% endfor %}

{# Кнопки "Редактировать", "Удалить", "Назад" теперь должны быть предоставлены ВНЕ этого шаблона. #}