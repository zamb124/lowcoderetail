{# core_sdk/frontend/templates/components/_confirm_delete_modal.html #}
{# Ожидает: request, ctx (RenderContext с item_id, model_name), url_for #}
{% set modal_id = "confirm-delete-" ~ ctx.model_name ~ "-" ~ ctx.item_id %}
{% extends "components/_modal_wrapper.html" %}

{% block modal_size %}modal-md{% endblock %} {# Маленькая модалка для подтверждения #}

{% block modal_title %}Подтверждение удаления{% endblock %}

{% block modal_body %}
    <p>Вы уверены, что хотите удалить <strong>{{ ctx.model_name }}</strong> (ID: {{ ctx.item_id }})?</p>
    <p class="text-danger fw-semibold">Это действие необратимо.</p>
{% endblock %}

{% block modal_footer %}
<div class="modal-footer">
    <button type="button" class="btn btn-light" data-bs-dismiss="modal">Отмена</button>
    <button type="button" class="btn btn-danger"
            hx-delete="{{ url_for('delete_item', model_name=ctx.model_name, item_id=ctx.item_id) }}"
            {# Цель - строка таблицы или блок просмотра. Ищем ближайший элемент с атрибутом ui_key #}
            hx-target="closest [ui_key='{{ ctx.model_name }}--{{ ctx.item_id }}']"
            hx-swap="outerHTML swap:1s" {# Удаляем элемент после успешного ответа 2xx с задержкой #}
            {# data-bs-dismiss="modal" #} {# Закрываем модалку вручную после успешного delete, если нужно #}
            onclick="this.closest('.modal').querySelector('[data-bs-dismiss]').click()" {# Закрываем модалку после клика #}
            >
        Удалить
    </button>
</div>
{% endblock %}